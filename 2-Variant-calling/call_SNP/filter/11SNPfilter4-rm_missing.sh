#!/bin/bash
set -e
TABIX="/w/00/u/user201/software/tabix-0.2.6"
VCFTOOLS="/data/apps/vcftools/vcftools-0.1.15/bin"
outdir="/w/00/g/g00/sangyupeng/xiangyang/filter/final_remove_indel_snp/filter5_rm_miss_maf"
indir="/w/00/g/g00/sangyupeng/xiangyang/filter/final_remove_indel_snp/filter4_GQ"

for vcf in $indir/*.gz
do
	temp=${vcf##*/}
	chr=${temp%recode.*}rm_missing_maf
	chr_gz=${temp%recode.*}rm_missing_maf.recode.vcf
	echo "cd $outdir;$VCFTOOLS/vcftools --gzvcf $vcf --max-missing 0.8 --maf 0.00001 --recode --recode-INFO-all --out $chr;$TABIX/bgzip $chr_gz" >> 16filter.sh
done
