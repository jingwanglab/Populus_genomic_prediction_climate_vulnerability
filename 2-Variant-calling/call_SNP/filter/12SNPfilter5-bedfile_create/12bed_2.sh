#!/bin/bash
set -e
bed_dir="/w/00/g/g00/sangyupeng/xiangyang/reference/bed"
sites_dir="/w/00/g/g00/sangyupeng/xiangyang/reference/true_bed/sites"

for bed in $bed_dir/*.bed
do
	temp=${bed##*-LH.}
	chr=${temp%.*}
	outfile="zsp193a-LH.$chr.sites.txt"
	if [ $chr == "contig" ]; then
	contig_n=`cat $bed | wc -l`
	for ((i=1;i<=$contig_n;i++))
	do
		contig=`head -n $i $bed |tail -n 1 |cut -f 1`
		length=`head -n $i $bed |tail -n 1 |cut -f 3`
		for ((j=1;j<=$length;j++))
		do
			echo -e "$contig\t$j" >> $sites_dir/$outfile
		done
	done
	else
		length=`cut -f 3 $bed`
		for ((i=1;i<=$length;i++))
		do
			echo -e "$chr\t$i" >> $sites_dir/$outfile
		done
	fi
done
