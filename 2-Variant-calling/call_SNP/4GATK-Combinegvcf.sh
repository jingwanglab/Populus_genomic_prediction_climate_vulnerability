#!/bin/bash
set -e
INDIR="/w/00/g/g00/sangyupeng/xiangyang/GATK_gvcf"
OUTDIR="/w/00/g/g00/sangyupeng/xiangyang/combinegvcf"
beddir="/w/00/g/g00/sangyupeng/xiangyang/reference/bed"
GATK="/data/apps/gatk/gatk-4.0.5.1"
JAVA="/data/apps/jdk/jdk1.8.0_131/bin/java"
reference="/w/00/g/g00/sangyupeng/xiangyang/reference/zsp193a-LH.LG.fasta"
#create variant
inputfile=""

#create inputfile
for dir in $INDIR/*
do
        for file in $dir/*.g.vcf.gz
        do
                inputfile="$inputfile --variant $file"
        done
done
#choose -L
for bed in $beddir/*
do
	temp=${bed##*/}
	outfile=${temp%.*}.g.vcf.gz
	echo "source ~/.bashrc;cd $OUTDIR;/data/apps/jdk/jdk1.8.0_131/bin/java -Xmx36g -jar /data/apps/gatk/gatk-4.0.5.1/gatk-package-4.0.5.1-local.jar CombineGVCFs -R $reference $inputfile -L $bed -O $outfile" >> /w/00/u/user201/combinegvcf.sh
done
