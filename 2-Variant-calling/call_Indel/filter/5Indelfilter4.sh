#!/bin/bash
set -e
indir="/w/00/g/g00/sangyupeng/xiangyang/INDEL/pk_indel230/filter/filter3"
outdir="/w/00/g/g00/sangyupeng/xiangyang/INDEL/pk_indel230/filter/filter4"
filterindel_count_file="/w/00/u/user201/filter4.gatk_summary.csv"
TABIX="/w/00/u/user201/software/tabix-0.2.6"
sh_file="/w/00/u/user201/4filter.sh"

echo "LG        count" > $filterindel_count_file
for vcf in $indir/*.gz
do
	chr=`basename $vcf .230.indel.bialleleic.DP5.recode.vcf.gz`
	outfile=`basename $vcf .recode.vcf.gz`.gatk.vcf
	count=`zcat $vcf | grep "Filter" | wc -l`
	echo "$chr	$count" >> $filterindel_count_file
	echo "cd $outdir;zcat $vcf | grep -v \"Filter\" > $outfile;$TABIX/bgzip $outfile" >> $sh_file
done
